<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–ê—Ä—Ö—ñ–≤–∞—Ç–æ—Ä</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;600;700&family=Nunito:wght@400;600;700;800&display=swap');

    * { margin: 0; padding: 0; box-sizing: border-box; }

    :root {
      --bg: #0f1117;
      --surface: #181a24;
      --surface2: #1e2030;
      --border: #2a2d3e;
      --text: #e2e4f0;
      --text-dim: #8287a5;
      --accent: #6c5ce7;
      --accent-light: #a29bfe;
      --accent-glow: rgba(108, 92, 231, 0.25);
      --success: #00b894;
      --danger: #e17055;
      --warning: #fdcb6e;
      --radius: 12px;
    }

    body {
      font-family: 'Nunito', sans-serif;
      background: var(--bg);
      color: var(--text);
      height: 100vh;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      user-select: none;
    }

    /* ‚îÄ‚îÄ Header ‚îÄ‚îÄ */
    .header {
      display: flex;
      align-items: center;
      gap: 14px;
      padding: 20px 28px 16px;
      border-bottom: 1px solid var(--border);
      -webkit-app-region: drag;
    }

    .header-icon {
      width: 42px; height: 42px;
      background: linear-gradient(135deg, var(--accent), #a29bfe);
      border-radius: 10px;
      display: flex; align-items: center; justify-content: center;
      font-size: 20px;
      box-shadow: 0 4px 20px var(--accent-glow);
    }

    .header h1 {
      font-size: 20px;
      font-weight: 800;
      letter-spacing: -0.3px;
    }

    .header p {
      font-size: 12px;
      color: var(--text-dim);
      margin-top: 1px;
    }

    /* ‚îÄ‚îÄ Main ‚îÄ‚îÄ */
    .main {
      flex: 1;
      display: flex;
      flex-direction: column;
      padding: 20px 28px;
      gap: 16px;
      overflow: hidden;
    }

    /* ‚îÄ‚îÄ Actions Row ‚îÄ‚îÄ */
    .actions {
      display: flex;
      gap: 10px;
      flex-shrink: 0;
    }

    .btn {
      font-family: 'Nunito', sans-serif;
      font-weight: 700;
      font-size: 13px;
      border: none;
      border-radius: 8px;
      padding: 10px 18px;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      transition: all 0.2s ease;
      -webkit-app-region: no-drag;
    }

    .btn-primary {
      background: var(--accent);
      color: #fff;
      box-shadow: 0 2px 12px var(--accent-glow);
    }
    .btn-primary:hover { background: #7c6ff0; transform: translateY(-1px); }
    .btn-primary:active { transform: translateY(0); }

    .btn-outline {
      background: transparent;
      color: var(--text);
      border: 1.5px solid var(--border);
    }
    .btn-outline:hover { border-color: var(--accent-light); color: var(--accent-light); }

    .btn-danger {
      background: transparent;
      color: var(--danger);
      border: 1.5px solid rgba(225, 112, 85, 0.3);
    }
    .btn-danger:hover { background: rgba(225, 112, 85, 0.1); }

    .btn-success {
      background: var(--success);
      color: #fff;
      box-shadow: 0 2px 12px rgba(0, 184, 148, 0.25);
    }
    .btn-success:hover { background: #00d2a4; transform: translateY(-1px); }
    .btn-success:disabled {
      opacity: 0.4;
      cursor: not-allowed;
      transform: none;
    }

    .btn svg { width: 16px; height: 16px; }

    .spacer { flex: 1; }

    /* ‚îÄ‚îÄ File List ‚îÄ‚îÄ */
    .file-list-container {
      flex: 1;
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      overflow: hidden;
      display: flex;
      flex-direction: column;
      min-height: 0;
    }

    .file-list-header {
      display: flex;
      align-items: center;
      padding: 12px 16px;
      font-size: 12px;
      font-weight: 700;
      color: var(--text-dim);
      text-transform: uppercase;
      letter-spacing: 0.8px;
      border-bottom: 1px solid var(--border);
      background: var(--surface2);
    }

    .file-list-header .col-name { flex: 1; }
    .file-list-header .col-size { width: 100px; text-align: right; }
    .file-list-header .col-action { width: 40px; }

    .file-list {
      flex: 1;
      overflow-y: auto;
      padding: 4px;
    }

    .file-list::-webkit-scrollbar { width: 6px; }
    .file-list::-webkit-scrollbar-track { background: transparent; }
    .file-list::-webkit-scrollbar-thumb {
      background: var(--border);
      border-radius: 3px;
    }

    .file-item {
      display: flex;
      align-items: center;
      padding: 10px 12px;
      border-radius: 8px;
      transition: background 0.15s ease;
      animation: fadeSlideIn 0.3s ease forwards;
    }
    .file-item:hover { background: var(--surface2); }

    @keyframes fadeSlideIn {
      from { opacity: 0; transform: translateY(8px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .file-icon {
      width: 34px; height: 34px;
      background: var(--surface2);
      border: 1px solid var(--border);
      border-radius: 8px;
      display: flex; align-items: center; justify-content: center;
      margin-right: 12px;
      font-size: 14px;
      flex-shrink: 0;
    }

    .file-name {
      flex: 1;
      font-size: 13.5px;
      font-weight: 600;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .file-path {
      font-size: 11px;
      color: var(--text-dim);
      font-family: 'JetBrains Mono', monospace;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      margin-top: 2px;
    }

    .file-size {
      width: 100px;
      text-align: right;
      font-size: 12px;
      color: var(--text-dim);
      font-family: 'JetBrains Mono', monospace;
      flex-shrink: 0;
    }

    .file-remove {
      width: 30px; height: 30px;
      background: none;
      border: none;
      color: var(--text-dim);
      cursor: pointer;
      border-radius: 6px;
      display: flex; align-items: center; justify-content: center;
      margin-left: 8px;
      transition: all 0.15s ease;
      flex-shrink: 0;
    }
    .file-remove:hover { background: rgba(225, 112, 85, 0.15); color: var(--danger); }

    /* ‚îÄ‚îÄ Empty State ‚îÄ‚îÄ */
    .empty-state {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      color: var(--text-dim);
      gap: 12px;
      padding: 40px;
    }

    .empty-icon {
      width: 64px; height: 64px;
      background: var(--surface2);
      border: 2px dashed var(--border);
      border-radius: 16px;
      display: flex; align-items: center; justify-content: center;
      font-size: 28px;
      margin-bottom: 4px;
    }

    .empty-state h3 {
      font-size: 15px;
      color: var(--text);
      font-weight: 700;
    }

    .empty-state p {
      font-size: 13px;
      text-align: center;
      line-height: 1.5;
    }

    /* ‚îÄ‚îÄ Footer / Save Bar ‚îÄ‚îÄ */
    .footer {
      padding: 16px 28px 20px;
      border-top: 1px solid var(--border);
      display: flex;
      align-items: center;
      gap: 12px;
      flex-shrink: 0;
    }

    .save-path-display {
      flex: 1;
      display: flex;
      align-items: center;
      gap: 10px;
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 8px 14px;
      min-width: 0;
    }

    .save-path-display .label {
      font-size: 11px;
      font-weight: 700;
      color: var(--text-dim);
      text-transform: uppercase;
      letter-spacing: 0.5px;
      flex-shrink: 0;
    }

    .save-path-display .path {
      font-size: 12px;
      font-family: 'JetBrains Mono', monospace;
      color: var(--accent-light);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .save-path-display .path.empty {
      color: var(--text-dim);
      font-style: italic;
    }

    /* ‚îÄ‚îÄ Stats Bar ‚îÄ‚îÄ */
    .stats {
      display: flex;
      gap: 20px;
      font-size: 12px;
      color: var(--text-dim);
      flex-shrink: 0;
    }

    .stat {
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .stat-value {
      font-family: 'JetBrains Mono', monospace;
      color: var(--text);
      font-weight: 600;
    }

    /* ‚îÄ‚îÄ Progress Overlay ‚îÄ‚îÄ */
    .progress-overlay {
      position: fixed;
      inset: 0;
      background: rgba(15, 17, 23, 0.85);
      backdrop-filter: blur(8px);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 100;
    }

    .progress-overlay.active { display: flex; }

    .progress-card {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 16px;
      padding: 36px 44px;
      text-align: center;
      min-width: 360px;
      animation: scaleIn 0.25s ease;
    }

    @keyframes scaleIn {
      from { opacity: 0; transform: scale(0.95); }
      to { opacity: 1; transform: scale(1); }
    }

    .progress-card h3 {
      font-size: 17px;
      font-weight: 800;
      margin-bottom: 6px;
    }

    .progress-card p {
      font-size: 13px;
      color: var(--text-dim);
      margin-bottom: 24px;
    }

    .progress-bar-track {
      height: 8px;
      background: var(--surface2);
      border-radius: 4px;
      overflow: hidden;
      margin-bottom: 16px;
    }

    .progress-bar-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--accent), var(--accent-light));
      border-radius: 4px;
      width: 0%;
      transition: width 0.3s ease;
    }

    .progress-percent {
      font-family: 'JetBrains Mono', monospace;
      font-size: 28px;
      font-weight: 700;
      color: var(--accent-light);
    }

    /* ‚îÄ‚îÄ Result Overlay ‚îÄ‚îÄ */
    .result-overlay {
      position: fixed;
      inset: 0;
      background: rgba(15, 17, 23, 0.85);
      backdrop-filter: blur(8px);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 100;
    }
    .result-overlay.active { display: flex; }

    .result-card {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 16px;
      padding: 36px 44px;
      text-align: center;
      min-width: 380px;
      animation: scaleIn 0.25s ease;
    }

    .result-icon {
      width: 56px; height: 56px;
      border-radius: 50%;
      display: flex; align-items: center; justify-content: center;
      margin: 0 auto 16px;
      font-size: 26px;
    }

    .result-icon.success {
      background: rgba(0, 184, 148, 0.15);
      border: 2px solid var(--success);
    }

    .result-icon.error {
      background: rgba(225, 112, 85, 0.15);
      border: 2px solid var(--danger);
    }

    .result-card h3 { font-size: 17px; font-weight: 800; margin-bottom: 8px; }

    .result-details {
      font-size: 13px;
      color: var(--text-dim);
      line-height: 1.7;
      margin-bottom: 24px;
    }

    .result-details strong {
      color: var(--text);
      font-family: 'JetBrains Mono', monospace;
      font-size: 12px;
    }
  </style>
</head>
<body>

  <!-- Header -->
  <div class="header">
    <div class="header-icon">üì¶</div>
    <div>
      <h1>–ê—Ä—Ö—ñ–≤–∞—Ç–æ—Ä</h1>
      <p>–°—Ç–≤–æ—Ä–µ–Ω–Ω—è ZIP-–∞—Ä—Ö—ñ–≤—ñ–≤ –∑ –æ–±—Ä–∞–Ω–∏—Ö —Ñ–∞–π–ª—ñ–≤</p>
    </div>
  </div>

  <!-- Main Content -->
  <div class="main">
    <!-- Actions -->
    <div class="actions">
      <button class="btn btn-primary" id="btnAddFiles">
        <svg fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5">
          <path stroke-linecap="round" stroke-linejoin="round" d="M12 4v16m8-8H4"/>
        </svg>
        –î–æ–¥–∞—Ç–∏ —Ñ–∞–π–ª–∏
      </button>
      <button class="btn btn-outline" id="btnSavePath">
        <svg fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5">
          <path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"/>
        </svg>
        –û–±—Ä–∞—Ç–∏ —à–ª—è—Ö
      </button>
      <button class="btn btn-danger" id="btnClear" style="display:none;">
        <svg fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5">
          <path stroke-linecap="round" stroke-linejoin="round" d="M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"/>
        </svg>
        –û—á–∏—Å—Ç–∏—Ç–∏
      </button>
      <div class="spacer"></div>
      <button class="btn btn-success" id="btnArchive" disabled>
        <svg fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5">
          <path stroke-linecap="round" stroke-linejoin="round" d="M20.25 7.5l-.625 10.632a2.25 2.25 0 01-2.247 2.118H6.622a2.25 2.25 0 01-2.247-2.118L3.75 7.5m8.25 3v6.75m0 0l-3-3m3 3l3-3M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125z"/>
        </svg>
        –°—Ç–≤–æ—Ä–∏—Ç–∏ –∞—Ä—Ö—ñ–≤
      </button>
    </div>

    <!-- Stats -->
    <div class="stats" id="stats" style="display:none;">
      <div class="stat">–§–∞–π–ª—ñ–≤: <span class="stat-value" id="statCount">0</span></div>
      <div class="stat">–ó–∞–≥–∞–ª—å–Ω–∏–π —Ä–æ–∑–º—ñ—Ä: <span class="stat-value" id="statSize">0 B</span></div>
    </div>

    <!-- File List -->
    <div class="file-list-container">
      <div class="file-list-header" id="fileListHeader" style="display:none;">
        <span class="col-name">–Ü–º'—è —Ñ–∞–π–ª—É</span>
        <span class="col-size">–†–æ–∑–º—ñ—Ä</span>
        <span class="col-action"></span>
      </div>
      <div class="file-list" id="fileList">
        <div class="empty-state" id="emptyState">
          <div class="empty-icon">üìÇ</div>
          <h3>–§–∞–π–ª–∏ –Ω–µ –æ–±—Ä–∞–Ω–æ</h3>
          <p>–ù–∞—Ç–∏—Å–Ω—ñ—Ç—å ¬´–î–æ–¥–∞—Ç–∏ —Ñ–∞–π–ª–∏¬ª, —â–æ–± –æ–±—Ä–∞—Ç–∏<br>—Ñ–∞–π–ª–∏ –¥–ª—è –∞—Ä—Ö—ñ–≤—É–≤–∞–Ω–Ω—è</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <div class="footer">
    <div class="save-path-display">
      <span class="label">–®–ª—è—Ö:</span>
      <span class="path empty" id="savePath">–ù–µ –æ–±—Ä–∞–Ω–æ ‚Äî –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å ¬´–û–±—Ä–∞—Ç–∏ —à–ª—è—Ö¬ª</span>
    </div>
  </div>

  <!-- Progress Overlay -->
  <div class="progress-overlay" id="progressOverlay">
    <div class="progress-card">
      <h3>–°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∞—Ä—Ö—ñ–≤—É‚Ä¶</h3>
      <p>–ó–∞—á–µ–∫–∞–π—Ç–µ, —Ñ–∞–π–ª–∏ —Å—Ç–∏—Å–∫–∞—é—Ç—å—Å—è</p>
      <div class="progress-bar-track">
        <div class="progress-bar-fill" id="progressFill"></div>
      </div>
      <div class="progress-percent" id="progressPercent">0%</div>
    </div>
  </div>

  <!-- Result Overlay -->
  <div class="result-overlay" id="resultOverlay">
    <div class="result-card" id="resultCard"></div>
  </div>

  <script>
    // ‚îÄ‚îÄ State ‚îÄ‚îÄ
    let files = [];
    let savePath = null;

    // ‚îÄ‚îÄ DOM Elements ‚îÄ‚îÄ
    const $fileList = document.getElementById('fileList');
    const $emptyState = document.getElementById('emptyState');
    const $fileListHeader = document.getElementById('fileListHeader');
    const $savePath = document.getElementById('savePath');
    const $btnAddFiles = document.getElementById('btnAddFiles');
    const $btnSavePath = document.getElementById('btnSavePath');
    const $btnClear = document.getElementById('btnClear');
    const $btnArchive = document.getElementById('btnArchive');
    const $stats = document.getElementById('stats');
    const $statCount = document.getElementById('statCount');
    const $statSize = document.getElementById('statSize');
    const $progressOverlay = document.getElementById('progressOverlay');
    const $progressFill = document.getElementById('progressFill');
    const $progressPercent = document.getElementById('progressPercent');
    const $resultOverlay = document.getElementById('resultOverlay');
    const $resultCard = document.getElementById('resultCard');

    // ‚îÄ‚îÄ Helpers ‚îÄ‚îÄ
    function formatSize(bytes) {
      if (bytes === 0) return '0 B';
      const units = ['B', 'KB', 'MB', 'GB'];
      const i = Math.floor(Math.log(bytes) / Math.log(1024));
      return (bytes / Math.pow(1024, i)).toFixed(i > 0 ? 1 : 0) + ' ' + units[i];
    }

    function getFileExtIcon(name) {
      const ext = name.split('.').pop().toLowerCase();
      const map = {
        pdf: 'üìÑ', doc: 'üìù', docx: 'üìù', txt: 'üìÉ', rtf: 'üìÉ',
        jpg: 'üñºÔ∏è', jpeg: 'üñºÔ∏è', png: 'üñºÔ∏è', gif: 'üñºÔ∏è', svg: 'üñºÔ∏è', webp: 'üñºÔ∏è',
        mp3: 'üéµ', wav: 'üéµ', flac: 'üéµ', ogg: 'üéµ',
        mp4: 'üé¨', avi: 'üé¨', mkv: 'üé¨', mov: 'üé¨',
        zip: 'üì¶', rar: 'üì¶', '7z': 'üì¶', tar: 'üì¶',
        js: '‚ö°', ts: '‚ö°', py: 'üêç', html: 'üåê', css: 'üé®',
        exe: '‚öôÔ∏è', dll: '‚öôÔ∏è', iso: 'üíø',
        xls: 'üìä', xlsx: 'üìä', csv: 'üìä',
        ppt: 'üìΩÔ∏è', pptx: 'üìΩÔ∏è',
      };
      return map[ext] || 'üìÑ';
    }

    function updateUI() {
      const hasFiles = files.length > 0;

      $emptyState.style.display = hasFiles ? 'none' : 'flex';
      $fileListHeader.style.display = hasFiles ? 'flex' : 'none';
      $btnClear.style.display = hasFiles ? 'inline-flex' : 'none';
      $stats.style.display = hasFiles ? 'flex' : 'none';
      $btnArchive.disabled = !(hasFiles && savePath);

      if (hasFiles) {
        $statCount.textContent = files.length;
        const totalSize = files.reduce((sum, f) => sum + f.size, 0);
        $statSize.textContent = formatSize(totalSize);
      }
    }

    function renderFiles() {
      // –í–∏–¥–∞–ª—è—î–º–æ –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ –µ–ª–µ–º–µ–Ω—Ç–∏ —Ñ–∞–π–ª—ñ–≤ (–∑–∞–ª–∏—à–∞—î–º–æ emptyState)
      const items = $fileList.querySelectorAll('.file-item');
      items.forEach(el => el.remove());

      files.forEach((file, index) => {
        const div = document.createElement('div');
        div.className = 'file-item';
        div.style.animationDelay = `${index * 0.04}s`;
        div.innerHTML = `
          <div class="file-icon">${getFileExtIcon(file.name)}</div>
          <div style="flex:1; min-width:0;">
            <div class="file-name">${file.name}</div>
            <div class="file-path">${file.path}</div>
          </div>
          <div class="file-size">${formatSize(file.size)}</div>
          <button class="file-remove" data-index="${index}" title="–í–∏–¥–∞–ª–∏—Ç–∏">
            <svg width="16" height="16" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5">
              <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"/>
            </svg>
          </button>
        `;
        $fileList.appendChild(div);
      });

      updateUI();
    }

    // ‚îÄ‚îÄ Event Listeners ‚îÄ‚îÄ

    // –î–æ–¥–∞—Ç–∏ —Ñ–∞–π–ª–∏
    $btnAddFiles.addEventListener('click', async () => {
      const selected = await window.archiver.selectFiles();
      if (selected.length > 0) {
        // –£–Ω–∏–∫–∞—î–º–æ –¥—É–±–ª—ñ–∫–∞—Ç—ñ–≤ –∑–∞ —à–ª—è—Ö–æ–º
        const existingPaths = new Set(files.map(f => f.path));
        const newFiles = selected.filter(f => !existingPaths.has(f.path));
        files = [...files, ...newFiles];
        renderFiles();
      }
    });

    // –û–±—Ä–∞—Ç–∏ —à–ª—è—Ö –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è
    $btnSavePath.addEventListener('click', async () => {
      const path = await window.archiver.selectSavePath();
      if (path) {
        savePath = path;
        $savePath.textContent = path;
        $savePath.classList.remove('empty');
        updateUI();
      }
    });

    // –û—á–∏—Å—Ç–∏—Ç–∏ —Å–ø–∏—Å–æ–∫
    $btnClear.addEventListener('click', () => {
      files = [];
      renderFiles();
    });

    // –í–∏–¥–∞–ª–∏—Ç–∏ –æ–∫—Ä–µ–º–∏–π —Ñ–∞–π–ª
    $fileList.addEventListener('click', (e) => {
      const btn = e.target.closest('.file-remove');
      if (btn) {
        const index = parseInt(btn.dataset.index);
        files.splice(index, 1);
        renderFiles();
      }
    });

    // –°—Ç–≤–æ—Ä–∏—Ç–∏ –∞—Ä—Ö—ñ–≤
    $btnArchive.addEventListener('click', async () => {
      if (files.length === 0 || !savePath) return;

      // –ü–æ–∫–∞–∑—É—î–º–æ –ø—Ä–æ–≥—Ä–µ—Å
      $progressOverlay.classList.add('active');
      $progressFill.style.width = '0%';
      $progressPercent.textContent = '0%';

      try {
        const result = await window.archiver.createArchive({ files, savePath });

        $progressOverlay.classList.remove('active');

        if (result.success) {
          $resultCard.innerHTML = `
            <div class="result-icon success">‚úì</div>
            <h3>–ê—Ä—Ö—ñ–≤ —Å—Ç–≤–æ—Ä–µ–Ω–æ!</h3>
            <div class="result-details">
              –§–∞–π–ª—ñ–≤ –≤ –∞—Ä—Ö—ñ–≤—ñ: <strong>${result.totalFiles}</strong><br>
              –†–æ–∑–º—ñ—Ä –∞—Ä—Ö—ñ–≤—É: <strong>${formatSize(result.archiveSize)}</strong><br>
              –ó–±–µ—Ä–µ–∂–µ–Ω–æ: <strong>${result.savePath}</strong>
            </div>
            <button class="btn btn-primary" id="btnResultOk">–ì–æ—Ç–æ–≤–æ</button>
          `;
        } else {
          throw new Error(result.error || '–ù–µ–≤—ñ–¥–æ–º–∞ –ø–æ–º–∏–ª–∫–∞');
        }

        $resultOverlay.classList.add('active');

        document.getElementById('btnResultOk').addEventListener('click', () => {
          $resultOverlay.classList.remove('active');
        });

      } catch (err) {
        $progressOverlay.classList.remove('active');

        $resultCard.innerHTML = `
          <div class="result-icon error">‚úï</div>
          <h3>–ü–æ–º–∏–ª–∫–∞</h3>
          <div class="result-details">
            ${err.message || '–ù–µ –≤–¥–∞–ª–æ—Å—è —Å—Ç–≤–æ—Ä–∏—Ç–∏ –∞—Ä—Ö—ñ–≤'}
          </div>
          <button class="btn btn-outline" id="btnResultOk">–ó–∞–∫—Ä–∏—Ç–∏</button>
        `;
        $resultOverlay.classList.add('active');

        document.getElementById('btnResultOk').addEventListener('click', () => {
          $resultOverlay.classList.remove('active');
        });
      }
    });

    // –ó–∞–∫—Ä–∏—Ç—Ç—è result overlay –∫–ª—ñ–∫–æ–º –Ω–∞ —Ñ–æ–Ω
    $resultOverlay.addEventListener('click', (e) => {
      if (e.target === $resultOverlay) {
        $resultOverlay.classList.remove('active');
      }
    });

    // –ü—Ä–æ–≥—Ä–µ—Å –∞—Ä—Ö—ñ–≤—É–≤–∞–Ω–Ω—è
    window.archiver.onProgress((percent) => {
      $progressFill.style.width = percent + '%';
      $progressPercent.textContent = percent + '%';
    });

    // –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è
    updateUI();
  </script>
</body>
</html>